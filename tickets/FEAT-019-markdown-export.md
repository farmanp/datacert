# AI-Ready Story Template (Core)

## 1. Intent (Required)
**User Story:**
As a data engineer
I want to copy profiling results as Markdown
So that I can paste summaries directly into GitHub PRs, Jira tickets, or Slack

**Success Looks Like:**
A "Copy as Markdown" button generates a well-formatted Markdown summary that pastes cleanly into any Markdown-supporting platform.

## 2. Context & Constraints (Required)
**Background:**
Engineers share data quality findings in PRs, tickets, and chat daily. Currently they must either attach a 50MB HTML file or manually transcribe statistics. A one-click Markdown copy fits the engineering workflow perfectly - paste into a PR description, Jira comment, or Slack message.

**Scope:**
- **In Scope:**
  - "Copy as Markdown" button in export menu
  - Concise summary format (not full report)
  - Dataset overview: filename, rows, columns, quality score
  - Column summary table: name, type, missing%, distinct%, issues
  - Quality warnings section with bullet points
  - Top issues highlighted
  - Copy to clipboard functionality
  - Success toast notification

- **Out of Scope:**
  - Full statistics in Markdown (too verbose)
  - Histograms in Markdown (use ASCII art charts later)
  - Markdown file download (clipboard only)
  - Customizable template

**Constraints:**
- Output must be < 4KB for Slack message limits
- Tables must render in GitHub, GitLab, Jira, Confluence, Slack
- Use standard Markdown (no platform-specific extensions)
- Truncate to top 20 columns if dataset is wider

## 3. Acceptance Criteria (Required)
*Format: Gherkin (Given/When/Then)*

**Scenario: Copy Markdown summary**
Given profiling has completed for a dataset
When the user clicks "Copy as Markdown"
Then the summary is copied to clipboard
And a toast shows "Copied to clipboard!"
And the Markdown is valid when pasted into GitHub

**Scenario: Markdown format**
Given a profiled dataset with 10 columns
When Markdown is generated
Then output includes:
```markdown
## DataCert Profile: sales_data.csv

**Summary:** 50,000 rows × 10 columns | Quality Score: 87%

| Column | Type | Missing | Distinct | Issues |
|--------|------|---------|----------|--------|
| id | integer | 0% | 100% | - |
| email | string | 5% | 95% | ⚠️ PII |
...

### ⚠️ Quality Warnings
- `email`: Potential PII detected (email patterns)
- `phone`: 12% missing values
- `created_at`: 3 invalid date formats

---
*Generated by [DataCert](https://datacert.dev) on 2026-01-13*
```

**Scenario: Large dataset truncation**
Given a dataset with 50 columns
When Markdown is generated
Then only top 20 columns are shown
And footer indicates "...and 30 more columns"
And total output is < 4KB

**Scenario: Quality warnings prioritized**
Given a dataset with 15 quality warnings
When Markdown is generated
Then top 5 most severe warnings are shown
And footer indicates "...and 10 more warnings (see full report)"

**Scenario: Paste into GitHub PR**
Given copied Markdown from DataCert
When pasted into a GitHub PR description
Then the table renders correctly
And warnings display with emoji indicators
And links are clickable

## 4. AI Execution Instructions (Required)
**Allowed to Change:**
- `src/app/components/ExportButton.tsx` - Add Markdown option
- `src/app/utils/markdownExport.ts` - Markdown generation (create)
- `src/app/utils/clipboard.ts` - Clipboard utility (create or extend)
- `src/app/components/Toast.tsx` - Toast notification (if not exists)

**Must NOT Change:**
- HTML export functionality
- JSON export functionality
- Profile store structure
- Statistics computation

**Ambiguity Rule:**
If unclear, acceptance criteria override all other sections.

## 5. Planned Git Commit Message(s) (Required)
- feat(export): implement markdown summary generator
- feat(export): add copy to clipboard with toast notification
- feat(ui): add "Copy as Markdown" to export menu
- test(export): add markdown export tests

## 6. Verification & Definition of Done (Required)
- [ ] All acceptance criteria scenarios pass
- [ ] Markdown renders correctly in: GitHub, GitLab, Jira, Slack
- [ ] Output < 4KB for large datasets
- [ ] Clipboard copy works in Chrome, Firefox, Safari
- [ ] Toast notification displays
- [ ] Truncation works for wide/problematic datasets
- [ ] Code reviewed

## 7. Resources
- Clipboard API: https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/writeText
- GitHub Flavored Markdown: https://github.github.com/gfm/
- Jira Markdown: https://jira.atlassian.com/secure/WikiRendererHelpAction.jspa
